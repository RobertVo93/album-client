(this["webpackJsonpalbum-client"]=this["webpackJsonpalbum-client"]||[]).push([[0],{102:function(e,t,a){e.exports=a(181)},107:function(e,t,a){},109:function(e,t,a){},158:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(6),s=a.n(r),l=(a(107),a(92)),o=a(10),c=a.n(o),u=a(17),h=a(12),d=a(15),p=a(11),m=a(19),g=a(18),v=(a(109),a(86)),f=a.n(v),b=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={hover:n.props.hover},n.fill=n.fill.bind(Object(p.a)(n)),n.visibility=n.visibility.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"fill",value:function(){return this.props.isSelected?this.props.selectedColor:this.state.hover?this.props.hoverColor:this.props.color}},{key:"visibility",value:function(){return this.props.isSelected||this.props.isSelectable&&this.props.parentHover?"visible":"hidden"}},{key:"render",value:function(){var e=this,t={display:this.props.isSelected?"block":"none"};return i.a.createElement("div",{title:"Select",style:{visibility:this.visibility(),background:"none",float:"left",width:"36px",height:"36px",border:"none",padding:"6px",cursor:"pointer",pointerEvents:"visible"},onClick:this.props.onClick?function(t){return e.props.onClick(e.props.index,t)}:null,onMouseOver:function(t){return e.setState({hover:!0})},onMouseOut:function(t){return e.setState({hover:!1})}},i.a.createElement("svg",{fill:this.fill(),height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("radialGradient",{id:"shadow",cx:"38",cy:"95.488",r:"10.488",gradientTransform:"matrix(1 0 0 -1 -26 109)",gradientUnits:"userSpaceOnUse"},i.a.createElement("stop",{offset:".832",stopColor:"#010101"}),i.a.createElement("stop",{offset:"1",stopColor:"#010101",stopOpacity:"0"})),i.a.createElement("circle",{style:t,opacity:".26",fill:"url(#shadow)",cx:"12",cy:"13.512",r:"10.488"}),i.a.createElement("circle",{style:t,fill:"#FFF",cx:"12",cy:"12.2",r:"8.292"}),i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})))}}]),a}(n.Component);b.defaultProps={isSelectable:!0,isSelected:!1,parentHover:!1,hover:!1};var y,k=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).componentDidUpdate=function(){n.props.refreshGrid&&n.setState({images:n.props.images,selectAllChecked:!1})},n.state={images:n.props.images,selectAllChecked:!1},n.onSelectImage=n.onSelectImage.bind(Object(p.a)(n)),n.getSelectedImages=n.getSelectedImages.bind(Object(p.a)(n)),n.onClickSelectAll=n.onClickSelectAll.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"allImagesSelected",value:function(e){return e.filter((function(e){return!0===e.isSelected})).length===e.length}},{key:"onSelectImage",value:function(e){var t=this.state.images.slice(),a=t[e];a.isSelected=!a.hasOwnProperty("isSelected")||!a.isSelected,this.setState({images:t,selectAllChecked:this.allImagesSelected(t)})}},{key:"getSelectedImages",value:function(){for(var e=[],t=0;t<this.state.images.length;t++)!0===this.state.images[t].isSelected&&e.push(this.state.images[t].id);return this.props.getSelectedImages(e),e}},{key:"onClickSelectAll",value:function(){for(var e=!this.state.selectAllChecked,t=this.state.images.slice(),a=0;a<this.state.images.length;a++)t[a].isSelected=e;this.setState({images:t,selectAllChecked:e})}},{key:"render",value:function(){return i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(b,{index:0,isSelected:this.state.selectAllChecked,onClick:this.onClickSelectAll,parentHover:!0,color:"rgba(0,0,0,0.54)",selectedColor:"#4285f4",hoverColor:"rgba(0,0,0,0.54)"}),i.a.createElement("div",{style:C},"select all"),i.a.createElement("div",{style:w},"Selected images: ",this.getSelectedImages().length),i.a.createElement("div",{style:S},i.a.createElement(f.a,{images:this.state.images,onSelectImage:this.onSelectImage,showLightboxThumbnails:!0})))}}]),a}(i.a.Component),C={height:"36px",display:"flex",alignItems:"center"},w={padding:"2px",color:"#666"},S={display:"block",minHeight:"1px",width:"100%",border:"1px solid #ddd",overflow:"auto"},E=a(209),O=a(214),P=a(216),x=a(217),j=a(218),I=a(213),B=a(182),N=a(56),F=a.n(N),R=a(89),A=a.n(R);a(158);!function(e){e.food="Food",e.nature="Nature",e.other="Other",e.personal="Personal",e.travel="Travel"}(y||(y={}));var D="https://robertvo-album.herokuapp.com/photos",T=a(159),_={timeout:Number(Object({NODE_ENV:"production",PUBLIC_URL:"/album-client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_TIMEOUT)||1e4,baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/album-client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_URL||"",headers:{common:{"Content-Type":"application/json",Accept:"application/json"}},paramsSerializer:function(e){return T.stringify(e,{indices:!1})}},K=a(87),U=a.n(K),V=new(function(){function e(t){Object(h.a)(this,e),this.numberOfRequest=void 0,this.api=void 0,this.api=U.a.create(t),this.numberOfRequest=0,this.getUri=this.getUri.bind(this),this.request=this.request.bind(this),this.get=this.get.bind(this),this.delete=this.delete.bind(this),this.head=this.head.bind(this),this.post=this.post.bind(this),this.put=this.put.bind(this),this.patch=this.patch.bind(this)}return Object(d.a)(e,[{key:"getUri",value:function(e){return this.api.getUri(e)}},{key:"request",value:function(e){return this.api.request(e)}},{key:"get",value:function(e,t){return this.api.get(e,t)}},{key:"delete",value:function(e,t){return this.api.delete(e,t)}},{key:"head",value:function(e,t){return this.api.head(e,t)}},{key:"post",value:function(e,t,a){return this.api.post(e,t,a)}},{key:"put",value:function(e,t,a){return this.api.put(e,t,a)}},{key:"patch",value:function(e,t,a){return this.api.patch(e,t,a)}},{key:"success",value:function(e){return e.data}},{key:"error",value:function(e){throw e}}]),e}())(_),H=function(){function e(){Object(h.a)(this,e),this.axiosConfig=void 0,this.axiosConfig=_}return Object(d.a)(e,[{key:"getAllData",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.post("".concat(D,"/list"),t);case 3:return a=e.sent,e.abrupt("return",V.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getFile",value:function(){var e=Object(u.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.get("".concat(D,"/").concat(t,"/").concat(a));case 3:return n=e.sent,e.abrupt("return",V.success(n));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"createNew",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.put("".concat(D),t);case 3:return a=e.sent,e.abrupt("return",V.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBulk",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.axiosConfig.data=t,e.next=4,V.delete("".concat(D),this.axiosConfig);case 4:return a=e.sent,e.abrupt("return",V.success(a));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.delete("".concat(D,"/").concat(t,"/").concat(a));case 3:return n=e.sent,e.abrupt("return",V.success(n));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),q=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).imageService=void 0,n.onClickUpload=function(){n.setState({open:!0})},n.onClickDelete=function(){n.props.onClickDelete()},n.onCloseModal=function(){n.setState({open:!1})},n.onSelectAlbumChange=function(e){n.setState({album:e.target.value})},n.onFileChange=function(e){n.setState({selectedFile:e.target.files})},n.onFileUpload=function(){if(n.state.selectedFile.length>0){var e=new FormData;e.append("album",n.state.album);for(var t=n.state.selectedFile.length,a=0;a<t;a++){var i=n.state.selectedFile[a],r="".concat((new Date).getTime()," - ").concat(i.name),s=new File([i],r);e.append("documents",s)}n.imageService.createNew(e).then((function(e){window.location.reload()}))}},n.state={open:!1,selectedFile:[],albumOptions:[{Key:y.travel,Value:y.travel},{Key:y.personal,Value:y.personal},{Key:y.food,Value:y.food},{Key:y.nature,Value:y.nature},{Key:y.other,Value:y.other}],album:y.travel},n.imageService=new H,n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:M},i.a.createElement("div",{className:"float-left"},i.a.createElement("h2",null,"Photos")),i.a.createElement("div",{style:W},this.props.noSelectedImages?i.a.createElement("div",{style:L},i.a.createElement(E.a,{onClick:this.onClickDelete,variant:"contained",color:"secondary",startIcon:i.a.createElement(A.a,null)},"Delete")):"",i.a.createElement("div",{style:L},i.a.createElement(E.a,{onClick:this.onClickUpload,variant:"contained",color:"default",startIcon:i.a.createElement(F.a,null)},"Upload"))),i.a.createElement(x.a,{style:G,"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:this.state.open,onClose:this.onCloseModal,closeAfterTransition:!0,BackdropComponent:I.a,BackdropProps:{timeout:500}},i.a.createElement(B.a,{in:this.state.open},i.a.createElement("div",{style:z},i.a.createElement("div",{className:"header",style:J},i.a.createElement("div",{className:"float-left"},i.a.createElement("h3",null,"Upload photos")),i.a.createElement("div",{className:"close-popup-button"},i.a.createElement("div",{onClick:function(){return e.onCloseModal()}},"X"))),i.a.createElement("div",{className:"modal-body"},i.a.createElement("div",{className:"custom-file"},i.a.createElement("p",{className:"drag-drop-label"},this.state.selectedFile&&this.state.selectedFile.length>0?"Selected: ".concat(this.state.selectedFile.length," file(s)"):"Drag 'n' drop some files here, or click to select files"),i.a.createElement("input",{className:"custom-file-name-textbox",onChange:this.onFileChange,multiple:!0,id:"inputGroupFile01",name:"images",type:"file"}))),i.a.createElement("div",{className:"modal-footer"},i.a.createElement(O.a,{className:"float-left album-select"},i.a.createElement(P.a,{value:this.state.album,onChange:this.onSelectAlbumChange},this.state.albumOptions.map((function(e){return i.a.createElement(j.a,{key:e.Key,value:e.Key},e.Value)})))),i.a.createElement(E.a,{onClick:this.onFileUpload,className:"float-right",variant:"contained",color:"default",startIcon:i.a.createElement(F.a,null)},"Upload"))))))}}]),a}(i.a.Component),M={display:"inline-block",width:"100%",margin:"0 10px 0 10px",paddingTop:30},W={display:"flex",float:"right",justifyContent:"center",alignItems:"center",minHeight:75},L={display:"inline-block",margin:"0 10px 0 10px"},G={display:"flex",alignItems:"center",justifyContent:"center",width:"40%",margin:"auto"},z={border:"2px solid #000",backgroundColor:"#ffffff",padding:25,width:"100%"},J={width:"100%",display:"inline-block"},X=function e(t){Object(h.a)(this,e),this.id=void 0,this.album=void 0,this.name=void 0,this.path=void 0,this.raw=void 0,this.thumbnailWidth=void 0,this.thumbnailHeight=void 0,this.src=void 0,this.thumbnail=void 0,this.thumbnailCaption=void 0,this.id=null===t||void 0===t?void 0:t.id,this.album=null===t||void 0===t?void 0:t.album,this.name=null===t||void 0===t?void 0:t.name,this.path=null===t||void 0===t?void 0:t.path,this.raw=null===t||void 0===t?void 0:t.raw,this.thumbnailWidth=250,this.thumbnailHeight=150,this.src=null===t||void 0===t?void 0:t.raw,this.thumbnail=null===t||void 0===t?void 0:t.raw,this.thumbnailCaption=null===t||void 0===t?void 0:t.name},$=a(215),Q=a(90),Y=a.n(Q),Z=a(91),ee=a.n(Z),te=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleBackButtonClick=function(){n.props.onChangePage(n.props.page-1)},n.handleNextButtonClick=function(){n.props.onChangePage(n.props.page+1)},n.handleChangeRowsPerPage=function(e){n.props.onChangeRowsPerPage(e.target.value)},n.state={rowsPerPageOptions:[{Key:10,Value:10},{Key:25,Value:25},{Key:50,Value:50},{Key:100,Value:100}]},n.handleNextButtonClick=n.handleNextButtonClick.bind(Object(p.a)(n)),n.handleBackButtonClick=n.handleBackButtonClick.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"width100"},i.a.createElement("div",{className:"float-right"},i.a.createElement("div",{style:ae},"Rows per page:"),i.a.createElement("div",{style:ae},i.a.createElement(O.a,{style:{width:60}},i.a.createElement(P.a,{style:{width:60},value:this.props.rowsPerPage,onChange:this.handleChangeRowsPerPage},this.state.rowsPerPageOptions.map((function(e){return i.a.createElement(j.a,{key:e.Key,value:e.Key},e.Value)}))))),i.a.createElement("div",{style:ae},i.a.createElement($.a,{onClick:this.handleBackButtonClick,disabled:0===this.props.page,"aria-label":"previous page"},i.a.createElement(Y.a,null)),i.a.createElement($.a,{onClick:this.handleNextButtonClick,disabled:this.props.count<this.props.rowsPerPage,"aria-label":"next page"},i.a.createElement(ee.a,null)))))}}]),a}(i.a.Component),ae={display:"inline-block",margin:"0 10px 0 10px"},ne=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).imageService=void 0,n.state={images:[],imageRequestConfig:{limit:25,skip:0},selectedImages:[],count:0,rowsPerPage:25,page:0,refreshGrid:!1},n.imageService=new H,n.handleDeleteSelectedImage=n.handleDeleteSelectedImage.bind(Object(p.a)(n)),n.getSelectedImages=n.getSelectedImages.bind(Object(p.a)(n)),n.onChangeRowsPerPage=n.onChangeRowsPerPage.bind(Object(p.a)(n)),n.onChangePage=n.onChangePage.bind(Object(p.a)(n)),n.getImagesByFilter=n.getImagesByFilter.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getImagesByFilter();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImagesByFilter",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.imageService.getAllData(this.state.imageRequestConfig);case 2:"OK"===(t=e.sent).message&&(a=t.documents.map((function(e){return new X(e)})),this.setState({images:a,count:t.count,refreshGrid:!0},(function(){n.setState({refreshGrid:!1})})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSelectedImages",value:function(e){JSON.stringify(e)!==JSON.stringify(this.state.selectedImages)&&this.setState({selectedImages:e})}},{key:"handleDeleteSelectedImage",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.state.selectedImages.length){e.next=2;break}return e.abrupt("return");case 2:for(n in t=[],a=this.state.images.filter((function(e){return-1!==i.state.selectedImages.indexOf(e.id)})).reduce((function(e,t){return e[t.album]=[].concat(Object(l.a)(e[t.album]||[]),[t]),e}),{}))t.push({album:n,documents:a[n].map((function(e){return e.name})).join(", ")});this.imageService.deleteBulk(t).then((function(e){"OK"===e.message&&window.location.reload()}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangePage",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={limit:this.state.rowsPerPage,skip:t*this.state.rowsPerPage},this.setState({imageRequestConfig:a,page:t},(function(){n.getImagesByFilter()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onChangeRowsPerPage",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={limit:t,skip:0},this.setState({imageRequestConfig:a,rowsPerPage:t,page:0},(function(){n.getImagesByFilter()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.images.map((function(e){return e.thumbnailCaption=i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("strong",null,e.name)),i.a.createElement("div",null,e.album)),e}));return i.a.createElement("div",{style:{width:"80%",margin:"auto"}},i.a.createElement(q,{onClickDelete:this.handleDeleteSelectedImage,noSelectedImages:this.state.selectedImages.length}),i.a.createElement(te,{count:this.state.count,page:this.state.page,rowsPerPage:this.state.rowsPerPage,onChangePage:this.onChangePage,onChangeRowsPerPage:this.onChangeRowsPerPage}),i.a.createElement(k,{images:e,getSelectedImages:this.getSelectedImages,refreshGrid:this.state.refreshGrid}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.78a864f4.chunk.js.map